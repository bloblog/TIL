
## 네트워크 기기의 처리 범위

네트워크는 여러 개의 네트워크 기기를 기반으로 구축된다.

**처리범위**

- 계층별로 처리 범위 나눈다
- 상위 계층을 처리하는 기기는 하위 계층을 처리할 수 있다
    - 반대는 불가능
    - e.g. L7 스위치는 애플리케이션 계층 처리 기기 → 모든 계층의 프로토콜 처리 가능

### 애플리케이션 계층

처리 기기 → **L7 스위치**

- 스위치 : 여러 장비를 연결 + 데이터 통신 중재 + 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비

- L7 스위치 = 로드밸런서
    - 서버의 부하를 분산하는 기기 (대표적인 기능 → 서버 이중화)
    - 클라이언트로부터 오는 요청을 뒤쪽의 여러 서버로 나눠준다.
    - 목표 : 시스템이 처리할 수 있는 트래픽 증가
- 어떻게 트래픽 분산?
    - URL, 서버, 캐시, 쿠키 등을 통해 분산
    - 트래픽 모니터링도 가능
- 바이러스나 불필요한 외부 데이터 등을 걸러내는 필터링 기능도 있다.
- 정기적으로 **헬스 체크**를 이용하여 감시
    - 정상 서버와 비정상 서버를 판별하는 것
    - 어떻게? 전송 주기와 재전송 횟수 등을 설정하고 반복적으로 서버에 요청을 보냄 → 요청 정상적으로 이루어지면 정상 서버
        - 이 때 요청 횟수는 서버에 부하가 되지 않을 만큼
        - 다양한 방법으로 요청을 보낸다
    - 장애가 발생한 서버는 트래픽 분산 대상에서 제외

- **L4 스위치**와의 차이?
    - 전송 계층을 처리하는 기기
    - 스트리밍 관련 서비스에서는 사용 불가
    - 메시지 기반 x 주로 포트 기반으로 트래픽을 분산한다.
    

    <aside>

        💡 클라우드 서비스 등에서 L7 스위치를 이용한 로드밸런싱은 ALB 컴포넌트 사용
           L4 스위치를 이용한 로드밸런싱은 NLB 컴포넌트 사용
    
    </aside>
    

- 로드밸런서를 이용한 서버 이중화
    - 2대 이상의 서버를 기반으로 가상 IP 제공 → 안정적인 서비스 제공 가능 (서버 하나 에러나도 운용 가능)
    - 가상 IP 에 사용자들이 접근
    - 뒷단에 서버 2개로 서빙

### 인터넷 계층

처리 기기 → **라우터, L3 스위치**

- 라우터
    - 여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할
    - 라우팅 : 다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을 때 패킷 소모를 최소화하고 경로를 최적화하여 최소 경로로 패킷을 포워딩하는 것
- L3 스위치
    - L2 스위치의 기능 + 라우팅 기능
    - 라우터로 봐도 무방 → 하드웨어 기반의 라우팅을 담당
    
    <aside>
    
        💡 L3 스위치와 L2 스위치 비교
        
        `참조 테이블` | 전자는 라우팅 테이블, 후자는 MAC 주소 테이블
        
        `참조 PDU` | IP 패킷, 이더넷 프레임
        
        `참조 주소` | IP 주소, MAC 주소
    
    </aside>
    

### 데이터 링크 계층

처리 기기 → **L2 스위치, 브리지**

- L2 스위치
    - 장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리
        - 목적지가 테이블에 없다면 전체 포트에 전달
        - MAC 주소 테이블의 주소는 일정 시간 이후 삭제하는 기능도 있다.
    - 연결된 장치로부터 패킷이 왔을 때 패킷 전송 담당
        - 단순히 주소 읽어서 스위칭만 수행
        - 라우팅은 불가능 → IP 주소를 이해하지 못하기 때문
- 브리지
    - 두 개의 LAN을 상호 접속할 수 있도록 하는 통신망 연결 장치
    - 포트 간 다리 역할 → 통신망 범위를 확장하고 서로 다른 LAN 등으로 이루어진 하나의 통신망을 구축할 때 사용
    - MAC 주소를 MAC 주소 테이블을 통해 관리

### 물리 계층

처리 기기 → **NIC, 리피터, AP**

- NIC
    - 네트워크 인터페이스 카드 = LAN 카드
    - 2대 이상의 컴퓨터 네트워크를 구성하는 데 사용
    - 빠른 속도로 데이터 송수신 가능케 하는 컴퓨터 내 확장 카드
    - 각 LAN 카드에는 고유 식별번호(MAC 주소) 가 담겨있다.
- 리피터
    - 약해진 신호 정도를 증폭하여 다른 쪽으로 전달하는 장치
    - 패킷이 더 멀리 갈 수 있도록 함
    - 광케이블의 보급으로 현재는 잘 쓰지 않음
- AP
    - 패킷을 복사하는 기기 = 공유기
    - AP에 유선 LAN 연결 → 다른 장치에서 무선 LAN 기술(와이파이 등)을 사용하여 무선 네트워크 연결